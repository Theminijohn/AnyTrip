<h1>Trip from: <b>Here</b> to <b>There</b></h1>

<div style='width: 100%;'>
  <div id="map" style='width: 100%; height: 200px;'></div>
</div>

  
<script src="//maps.google.com/maps/api/js?v=3.13&amp;sensor=false&amp;libraries=geometry" type="text/javascript"></script>
<script src="//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js" type='text/javascript'></script>

<% @departure = Airport.find_by_iata(@trip.flight_details.first.departure_airport_fs_code) %>
<% @arrival   = Airport.find_by_iata(@trip.flight_details.first.arrival_airport_fs_code) %>

<script type="text/javascript">
$(document).ready(function () {
	var handler = Gmaps.build('Google');
	handler.buildMap({ internal: {id: 'map'}}, function(){
	  var markers = handler.addMarkers([
	    { lat: <%= @departure.latitude %>, lng: <%= @departure.longitude %>},
	    { lat: <%= @arrival.latitude %>, lng: <%= @arrival.longitude %>}
	  ]);
	  handler.bounds.extendWith(markers);
		var polylines = handler.addPolylines(
		  [
		    [
		      {lat: <%= @departure.latitude %>, lng: <%= @departure.longitude %>},
		      {lat: <%= @arrival.latitude %>, lng: <%= @arrival.longitude %>}
		    ]
		  ],
		  { strokeColor: '#f76570'}
		);
		handler.bounds.extendWith(polylines);
	  handler.fitMapToBounds();
	});
	    
});
</script>


<p>
  <strong>Airline:</strong>
  <%= @trip.airline %>
</p>

<p>
  <strong>Departure date:</strong>
  <%= @trip.departure_date %>
</p>

<p>
  <strong>Flight number:</strong>
  <%= @trip.flight_number %>
</p>

<p>
  <strong>Status:</strong>
  <%= @trip.status %>
</p>

<%= link_to 'Edit', edit_trip_path(@trip) %> |
<%= link_to 'Back', trips_path %>
